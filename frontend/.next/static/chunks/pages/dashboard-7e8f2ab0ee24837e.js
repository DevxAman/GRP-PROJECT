(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(8170)}])},8170:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var r=t(5893),n=t(7294),a=t(1163),l=t(1664),i=t.n(l),c=t(9008),d=t.n(c);function o(){let e=(0,a.useRouter)(),[s,t]=(0,n.useState)([]),[l,c]=(0,n.useState)(!0),[o,x]=(0,n.useState)("");(0,n.useEffect)(()=>{let s=localStorage.getItem("token");if(!s){e.push("/login");return}h(s)},[e]);let h=async e=>{try{let s=await fetch("http://localhost:5000/api/grievances",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();t(e)}else x("Failed to fetch grievances")}catch(e){x("An error occurred while fetching grievances")}finally{c(!1)}},m=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"in-progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return l?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{children:[(0,r.jsx)(d(),{children:(0,r.jsx)("title",{children:"Dashboard - GNDEC Grievance Redressal Portal"})}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Grievances"}),(0,r.jsx)(i(),{href:"/file-grievance",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"File New Grievance"})]}),o&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded mb-6",children:o}),0===s.length?(0,r.jsx)("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No grievances found. File a new grievance to get started."})}):(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,r.jsx)("ul",{className:"divide-y divide-gray-200",children:s.map(e=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-600 truncate",children:e.title}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.subject})]}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(m(e.status)),children:e.status})})]}),(0,r.jsxs)("div",{className:"mt-2 sm:flex sm:justify-between",children:[(0,r.jsxs)("div",{className:"sm:flex",children:[(0,r.jsxs)("p",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.type]}),(0,r.jsxs)("p",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0 sm:ml-6",children:[(0,r.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(e.createdAt).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:[(0,r.jsx)("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),e.attachments.length," attachments"]})]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:e.description})})]})},e._id))})})]})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);