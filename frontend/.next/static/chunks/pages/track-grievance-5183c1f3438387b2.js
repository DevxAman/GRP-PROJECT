(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[362],{5983:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/track-grievance",function(){return s(3266)}])},3266:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(5893),a=s(7294),n=s(1163),i=s(9008),l=s.n(i),c=s(1664),o=s.n(c),d=s(3249);function m(){let e=(0,n.useRouter)(),{isLoggedIn:t}=(0,a.useContext)(d.AuthContext),[s,i]=(0,a.useState)(""),[c,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(null),[p,v]=(0,a.useState)([]),[j,y]=(0,a.useState)(!1),[w,N]=(0,a.useState)(""),[k,S]=(0,a.useState)({success:!1,message:""}),[I,C]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!1),[L,P]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(t)R(),e.query.trackingId&&(i(e.query.trackingId),D({preventDefault:()=>{}}));else if(e.query.trackingId){A(!0),u("Please log in to track your grievance");let t=setTimeout(()=>{e.push("/login?redirect=/track-grievance?trackingId=".concat(e.query.trackingId))},3e3);return()=>clearTimeout(t)}},[t,e.query.trackingId]);let R=async()=>{try{y(!0),u("");let t=localStorage.getItem("token");if(!t)return;let s=new AbortController,r=setTimeout(()=>s.abort(),15e3);try{let a=await fetch("http://localhost:5000/api/grievances/my-grievances",{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json","Cache-Control":"no-cache"},signal:s.signal});if(clearTimeout(r),a.ok){let e=await a.json();Array.isArray(e)?(v(e),0===e.length&&console.log("No grievances found for user")):(console.error("Unexpected data format:",e),u("Received unexpected data format from server"))}else if(401===a.status)console.error("Authentication error while fetching grievances"),u("Your session has expired. Please log in again."),setTimeout(()=>{localStorage.removeItem("token"),e.push("/login?redirect=/track-grievance")},2e3);else{let e=await a.text(),t="Failed to fetch grievances";try{t=JSON.parse(e).message||t}catch(e){console.error("Error parsing error response:",e)}console.error("Failed to fetch user grievances:",t),u(t)}}catch(e){clearTimeout(r),"AbortError"===e.name?(console.error("Request timed out while fetching grievances"),u("Request timed out. Please try again later.")):(console.error("Error fetching user grievances:",e),u("Failed to fetch grievances. Please check your connection and try again."))}}catch(e){console.error("Outer error fetching user grievances:",e),u("An unexpected error occurred while fetching grievances.")}finally{y(!1)}},D=async r=>{if(r.preventDefault(),!s){u("Please enter a tracking ID");return}if(!t){u("You must be logged in to track grievances"),A(!0),setTimeout(()=>{e.push("/login?redirect=/track-grievance?trackingId=".concat(s))},3e3);return}try{m(!0),u(""),b(null),P(!1),g("");let t=localStorage.getItem("token");if(!t)throw Error("Authentication token not found. Please log in again.");let r=await fetch("http://localhost:5000/api/grievances/track/".concat(s),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){let e=await r.json();b(e)}else{let t=await r.json();403===r.status?(u("Access denied: You can only track grievances that you have submitted."),P(!0),t.details&&g(t.details)):404===r.status?u("Grievance not found. Please check the tracking ID and try again."):401===r.status?(u("Your session has expired. Please log in again."),setTimeout(()=>{localStorage.removeItem("token"),e.push("/login?redirect=/track-grievance")},2e3)):u(t.message||"Failed to find grievance with the provided tracking ID")}}catch(e){u("An error occurred while tracking the grievance. Please try again later."),console.error("Track grievance error:",e)}finally{m(!1)}},E=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"in-progress":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},G=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),z=async()=>{if(!t){u("You must be logged in to send reminders"),e.push("/login?redirect=/track-grievance");return}if(!(null==f?void 0:f.trackingId)||!w.trim()){S({success:!1,message:"Please provide a message for the reminder"});return}C(!0),S({success:!1,message:""});try{console.log("Sending reminder for tracking ID: ".concat(f.trackingId));let e=localStorage.getItem("token");if(!e)throw Error("Authentication token not found. Please log in again.");let t=await fetch("http://localhost:5000/api/grievances/send-reminder",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({trackingId:f.trackingId,message:w})}),s=await t.json();if(!t.ok)throw Error(s.message||"Failed to send reminder");S({success:!0,message:"Reminder sent successfully! The administration has been notified."}),N("")}catch(e){console.error("Error sending reminder:",e),S({success:!1,message:e.message||"Failed to send reminder. Please try again later."})}finally{C(!1)}};return T?(0,r.jsxs)("div",{children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:"Login Required - GNDEC Grievance Portal"})}),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,r.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:"You need to be logged in to track grievances. Redirecting to login page..."})})]})}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"button",onClick:()=>e.push("/login?redirect=/track-grievance"),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go to Login Page"})})]})})})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Track Grievance - GNDEC Grievance Portal"}),(0,r.jsx)("meta",{name:"description",content:"Track the status of your submitted grievances"})]}),(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-white to-blue-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 sm:text-4xl",children:"Track Your Grievance"}),(0,r.jsx)("p",{className:"mt-4 text-xl text-gray-500",children:"Enter your grievance tracking ID or view your submitted grievances"})]}),(0,r.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-400 mb-8",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Security Information"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,r.jsx)("p",{children:"For privacy and security reasons, grievances can only be tracked by the user who submitted them. You must be logged in with the same account that was used to file the grievance to view its details."})})]})]})}),(0,r.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg mb-10",children:[t?(0,r.jsx)("form",{onSubmit:D,className:"space-y-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"trackingId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Grievance Tracking ID"}),(0,r.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,r.jsx)("input",{type:"text",name:"trackingId",id:"trackingId",className:"flex-1 min-w-0 block w-full px-4 py-3 rounded-md border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:"Enter your tracking ID (e.g., GR-1234)",value:s,onChange:e=>i(e.target.value)}),(0,r.jsx)("button",{type:"submit",className:"ml-3 inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-md font-medium rounded-md text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-300",disabled:c,children:c?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Tracking..."]}):"Track Grievance"})]}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"You can only track grievances that you have submitted."})]})}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("svg",{className:"h-12 w-12 text-blue-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Login Required"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to track grievances. Only the user who filed a grievance can track it."}),(0,r.jsx)(o(),{href:"/login?redirect=/track-grievance",className:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Login to Your Account"})]}),x&&(0,r.jsx)("div",{className:"mt-6 ".concat(L?"bg-yellow-50 border-l-4 border-yellow-400":"bg-red-50 border-l-4 border-red-400"," p-4 rounded-md"),children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 ".concat(L?"text-yellow-400":"text-red-400"),viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"text-sm ".concat(L?"text-yellow-700":"text-red-700"),children:x}),L&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:h||"For security reasons, grievances can only be tracked by the user who submitted them. Please check your own grievances below or make sure you're logged in with the correct account."})})]})]})}),f&&(0,r.jsxs)("div",{className:"mt-6 border border-gray-200 rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 bg-gray-50 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Grievance Details"})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)(e=>{let{currentStatus:t}=e,s=["pending","in-progress","resolved","rejected"].indexOf(t),a="rejected"===t;return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"text-xs text-gray-500 flex justify-between mb-1",children:[(0,r.jsx)("span",{children:"Submitted"}),(0,r.jsx)("span",{children:"In Progress"}),(0,r.jsx)("span",{children:"Resolved"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-gray-200",children:a?(0,r.jsx)("div",{className:"w-full flex flex-col text-center text-white justify-center bg-red-500 rounded"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center ".concat(s>=0?"bg-blue-500":"bg-gray-300"),style:{width:"33%"}}),(0,r.jsx)("div",{className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center ".concat(s>=1?"bg-blue-500":"bg-gray-300"),style:{width:"33%"}}),(0,r.jsx)("div",{className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center ".concat(s>=2?"bg-green-500":"bg-gray-300"),style:{width:"34%"}})]})}),a&&(0,r.jsx)("div",{className:"text-center text-sm text-red-600 font-medium mt-2",children:"This grievance has been rejected by the administration."})]})]})},{currentStatus:f.status}),(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Tracking ID"}),(0,r.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900",children:f.trackingId})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,r.jsx)("dd",{className:"mt-1",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium ".concat(E(f.status)),children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Submitted On"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:G(f.createdAt)})]}),(0,r.jsxs)("div",{className:"sm:col-span-1",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:G(f.updatedAt)})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Category"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:f.category})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Subject"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900 font-medium",children:f.subject})]}),(0,r.jsxs)("div",{className:"sm:col-span-2",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Description"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap bg-gray-50 p-3 rounded border border-gray-100",children:f.description})]}),f.response&&(0,r.jsxs)("div",{className:"sm:col-span-2 bg-blue-50 p-4 rounded-md border border-blue-100",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-blue-700",children:"Administrative Response"}),(0,r.jsx)("dd",{className:"mt-1 text-sm text-blue-900 whitespace-pre-wrap",children:f.response})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[(0,r.jsx)("button",{onClick:()=>e.push("/file-grievance"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"File Another Grievance"}),"pending"===f.status&&(0,r.jsx)("button",{onClick:()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:"Send Reminder"})]})]})]})]}),t&&(0,r.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Your Submitted Grievances"}),(0,r.jsx)(o(),{href:"/file-grievance",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"File New Grievance"})]}),!j&&p.length>0&&!x&&(0,r.jsx)(e=>{let{grievances:t}=e,s=t.reduce((e,t)=>{let s=t.status||"pending";return e[s]=(e[s]||0)+1,e},{}),a=t.length;return(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Grievance Overview"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{status:"pending",label:"Pending",color:"bg-yellow-100 border-yellow-400 text-yellow-800"},{status:"in-progress",label:"In Progress",color:"bg-blue-100 border-blue-400 text-blue-800"},{status:"resolved",label:"Resolved",color:"bg-green-100 border-green-400 text-green-800"},{status:"rejected",label:"Rejected",color:"bg-red-100 border-red-400 text-red-800"}].map(e=>{let{status:t,label:n,color:i}=e;return(0,r.jsxs)("div",{className:"border-l-4 rounded-md p-4 ".concat(i),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:n}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:s[t]||0})]}),(0,r.jsx)("p",{className:"text-xs mt-1",children:s[t]?"".concat(Math.round(s[t]/a*100),"% of total"):"None yet"})]},t)})})]})},{grievances:p}),x&&x.includes("Failed to fetch grievances")&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center mb-3 sm:mb-0",children:[(0,r.jsx)("svg",{className:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Grievances"}),(0,r.jsx)("p",{className:"text-sm text-red-700 mt-1",children:x})]})]}),(0,r.jsxs)("button",{onClick:()=>{R()},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-150",children:[(0,r.jsx)("svg",{className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry Loading"]})]})}),j?(0,r.jsx)("div",{className:"py-12 flex justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-3"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Loading your grievances..."})]})}):p.length>0?(0,r.jsx)("div",{className:"overflow-hidden border border-gray-200 rounded-lg",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tracking ID"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted Date"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.trackingId}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 truncate max-w-xs",children:e.subject}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(E(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(e.createdAt)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsx)("button",{onClick:()=>{i(e.trackingId),D({preventDefault:()=>{}})},className:"text-blue-600 hover:text-blue-900 font-medium",children:"View Details"})})]},e._id))})]})}):x?null:(0,r.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No grievances found"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You haven't submitted any grievances yet."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(o(),{href:"/file-grievance",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"File Your First Grievance"})})]})]}),f&&["pending","in-progress"].includes(f.status)&&t&&(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden mt-10",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-5 sm:px-6",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Send a Reminder"}),(0,r.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"If your grievance has been pending for a while, you can send a reminder to the admin."})]}),(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[k.message&&(0,r.jsx)("div",{className:"mb-4 p-3 ".concat(k.success?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"," rounded-md"),children:k.message}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("textarea",{rows:"3",name:"reminderMessage",id:"reminderMessage",value:w,onChange:e=>N(e.target.value),placeholder:"Type your reminder message here...",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Please be polite and specific in your reminder to get a better response."}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{type:"button",onClick:z,disabled:I||!w.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(I||!w.trim()?"opacity-50 cursor-not-allowed":""),children:I?"Sending...":"Send Reminder"})})]})]})]})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5983)}),_N_E=e.O()}]);